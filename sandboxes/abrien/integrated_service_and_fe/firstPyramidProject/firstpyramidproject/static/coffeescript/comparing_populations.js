// Generated by CoffeeScript 1.4.0
(function() {
  var generate_jqplot_input, get_number_of_segments, prepare_list_for_jqplot;

  generate_jqplot_input = function(json) {
    var bar, bar_groups, bar_list, bars, grade_groups, num_segs, scope_groups, seg, seg_list, _i, _j, _len, _len1, _ref;
    scope_groups = json['scope_groups'][0];
    grade_groups = scope_groups['grade_groups'][0];
    bar_groups = grade_groups['bar_groups'][0];
    bars = bar_groups['bars'];
    num_segs = get_number_of_segments(bars);
    console.log(num_segs);
    bar_list = [];
    for (_i = 0, _len = bars.length; _i < _len; _i++) {
      bar = bars[_i];
      seg_list = [];
      _ref = bar['segments'];
      for (_j = 0, _len1 = _ref.length; _j < _len1; _j++) {
        seg = _ref[_j];
        seg_list.push(seg['student_count']);
      }
      bar_list.push(seg_list);
    }
    return prepare_list_for_jqplot(bar_list);
  };

  prepare_list_for_jqplot = function(bar_list) {};

  get_number_of_segments = function(bars) {
    var first_bar;
    first_bar = bars[0];
    return first_bar['segments'].length;
  };

  $(document).ready(function() {
    var callback, plot3, s1, s2, s3, scope_groups;
    scope_groups = generate_jqplot_input(json_data);
    s1 = [2, 6, 7, 10];
    s2 = [7, 5, 3, 4];
    s3 = [14, 9, 3, 8];
    plot3 = $.jqplot('chart', [s1, s2, s3], {
      stackSeries: true,
      captureRightClick: true,
      seriesDefaults: {
        renderer: $.jqplot.BarRenderer,
        rendererOptions: {
          barMargin: 30,
          highlightMouseDown: true
        },
        pointLabels: {
          show: true
        }
      },
      axes: {
        xaxis: {
          renderer: $.jqplot.CategoryAxisRenderer
        },
        yaxis: {
          padMin: 0
        }
      },
      legend: {
        show: false,
        location: 'e',
        placement: 'outside'
      }
    });
    callback = function(ev, seriesIndex, pointIndex, data) {
      return $('#info').html('series: ' + seriesIndex + ', point: ' + pointIndex + ', data: ' + data);
    };
    return $('#chart').bind('jqplotDataClick', callback);
  });

}).call(this);
