<div id="CSVModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h2 id="myModalLabel">CSV File Download Options</h2>
    </div>
    <div class="modal-body">
        <div id="message">
            <p>Once requested your CSV will become available in 24 hours at <a>your secure FTP site</a>.</p>
        </div>
        <table class='csv_options_table'>
            {{#extractType}}
            <tr>
                <td>{{name}}</td>
                <td>
                    <div class="btn-group" data-option-name="{{name}}">
                        <button class="btn dropdown-toggle btn-small" data-toggle="dropdown">
                            <span class='dropdown-display'>{{options.0.display}}</span>
                            <span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu" data-key="{{key}}">
                            {{#options}}
                            <li><label><input type="checkbox" value="{{value}}" data-label="{{display}}">{{display}}</label></li>
                            {{/options}}
                        </ul>
                    </div>
                </td>
            </tr>
            {{/extractType}}
            {{#asmtState}}
            <tr>
                <td>{{name}}</td>
                <td>
                    <div class="btn-group" data-option-name="{{name}}">
                        <button class="btn dropdown-toggle btn-small" data-toggle="dropdown">
                            <span class='dropdown-display'>{{options.0.display}}</span>
                            <span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu" data-key="{{key}}">
                            {{#options}}
                            <li><label><input type="checkbox" value="{{value}}" data-label="{{display}}">{{display}}</label></li>
                            {{/options}}
                        </ul>
                    </div>
                </td>
            </tr>
            {{/asmtState}}
            {{#asmtYear}}
            <tr>
                <td>{{name}}</td>
                <td>
                    <div class="btn-group" data-option-name="{{name}}">
                        <button class="btn dropdown-toggle btn-small" data-toggle="dropdown">
                            <span class='dropdown-display'>{{options.0.display}}</span>
                            <span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu" data-key="{{key}}">
                            {{#options}}
                            <li><label><input type="checkbox" value="{{value}}" data-label="{{display}}">{{display}}</label></li>
                            {{/options}}
                        </ul>
                    </div>
                </td>
            </tr>
            {{/asmtYear}}
            {{#asmtType}}
            <tr>
                <td>{{name}}</td>
                <td>
                    <div id="asmtType" class="btn-group" data-option-name="{{name}}">
                        <ul class="checkbox-menu" data-key="{{key}}">
                            {{#options}}
                            <li><label><input type="checkbox" value="{{value}}" data-label="{{display}}">{{display}}</label></li>
                            {{/options}}
                        </ul>
                    </div>
                </td>
            </tr>
            {{/asmtType}}
            {{#subject}}
            <tr>
                <td>{{name}}</td>
                <td>
                    <div class="btn-group" data-option-name="{{name}}">
                        <ul class="checkbox-menu" data-key="{{key}}">
                            {{#options}}
                            <li><label><input type="checkbox" value="{{value}}" data-label="{{display}}">{{display}}</label></li>
                            {{/options}}
                        </ul>
                    </div>
                </td>
            </tr>
            {{/subject}}
        </table>
    </div>
    <div class="modal-footer">
        <button class="btn btn-primary">Request Files</button>
    </div>

    <script type="text/template" id="ErrorMessageTemplate">
     System Error.
    </script>

    <script type="text/template" id="SuccessMessageTemplate">
     {{#singleSuccess}}
     <div class="success">
       {{#success.0}}
       Your request for {{asmtState}} {{asmtYear}} {{asmtType}} {{asmtSubject}} Tests Results made on {{requestDate}} at {{requestTime}} successful!
       Please visit your <a href="#">some-FTP-site.com</a> in 2 hours to download the requested reports.
       {{/success.0}}
     </div>
     {{/singleSuccess}}
     {{#multipleSuccess}}
     <div class="success">
         Your request made on {{requestDate}} at {{requestTime}} successful! <br/>
         Please visit your <a href="#">some-FTP-site.com</a> in 2 hours to download the requested reports.
         <ul>
           {{#success}}
           <li>{{asmtState}} {{asmtYear}} {{asmtType}} {{asmtSubject}}</li>
           {{/success}}
         </ul>
     </div>
     {{/multipleSuccess}}
     {{#singleFailure}}
     <div class="error">
         {{#failure.0}}
         Your request could not go through. <strong>{{asmtType}}</strong> results are not available for <strong>{{asmtState}} {{asmtYear}} {{asmtSubject}}</strong>.
         Please select other options or try again at a later date, when data become available.
         {{/failure.0}}
     </div>
     {{/singleFailure}}
     {{#multipleFailure}}
     <div class="error">
         Your request could not go through. Data are not available for the following reports:
         <ul>
             {{#failure}}
             <li><strong>{{asmtState}} {{asmtYear}} {{asmtType}} {{asmtSubject}}</strong></li>
             {{/failure}}
         </ul>
         Please select other options or try again at a later date, when data become available.
     </div>
     {{/multipleFailure}}
    </script>

    <script type="text/template" id="IndividualValidationTemplate">
       <div class="error">Please select at least one {{optionName}} to continue.</div>
    </script>    

    <script type="text/template" id="CombinedValidationTemplate">
       <div class="error">
          Please select values for the following fields to continue.
          <ul>
             {{#optionNames}}
             <li>{{.}}</li>
             {{/optionNames}}
          </ul>
       </div>
    </script>  
</div>